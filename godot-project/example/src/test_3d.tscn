[gd_scene load_steps=20 format=3 uid="uid://blxmwn4jq2mot"]

[ext_resource type="PackedScene" uid="uid://dsoiq0u4jfsqb" path="res://example/src/inventory_menu.tscn" id="1"]
[ext_resource type="Script" path="res://addons/wyvernbox/view_extra/grabbed_item_stack.gd" id="2"]
[ext_resource type="PackedScene" uid="uid://cqa45c6lfsffv" path="res://exports/addons/wyvernbox_prefabs/tooltip.tscn" id="3"]
[ext_resource type="PackedScene" uid="uid://bfuapdb4wsbi1" path="res://ground_items.tscn" id="3_e5ahg"]
[ext_resource type="PackedScene" uid="uid://co5ok1mm2s7vu" path="res://exports/addons/wyvernbox_prefabs/item_stack_view.tscn" id="4"]
[ext_resource type="Script" path="res://example/src/test_3d_char.gd" id="7"]
[ext_resource type="Resource" path="res://example/wyvernbox/item_generators/basic_loot.tres" id="8"]
[ext_resource type="Script" path="res://addons/wyvernbox/inventories/grid_inventory.gd" id="11"]
[ext_resource type="Theme" uid="uid://75b71yv7xu1e" path="res://example/theme/default.tres" id="17_ici5q"]

[sub_resource type="CylinderShape3D" id="1"]
radius = 0.56303

[sub_resource type="CylinderMesh" id="7"]
top_radius = 0.568
bottom_radius = 0.568
height = 1.999
radial_segments = 15

[sub_resource type="CylinderShape3D" id="8"]
height = 3.02818
radius = 0.805338

[sub_resource type="BoxShape3D" id="2"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_i1865"]
albedo_color = Color(0.576471, 0.270588, 0.0313726, 1)

[sub_resource type="BoxMesh" id="3"]
material = SubResource("StandardMaterial3D_i1865")

[sub_resource type="Sky" id="6"]

[sub_resource type="Environment" id="5"]
background_mode = 2
sky = SubResource("6")
ambient_light_sky_contribution = 0.0

[sub_resource type="Resource" id="Resource_wn8mf"]
resource_local_to_scene = true
resource_name = "GridInventory"
script = ExtResource("11")
height = 12
width = 8

[sub_resource type="Resource" id="Resource_cqjis"]
resource_local_to_scene = true
resource_name = "GridInventory"
script = ExtResource("11")
height = 12
width = 8

[node name="Node" type="Node"]

[node name="Node3D" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 147.626, 0, 0)

[node name="Hero" type="CharacterBody3D" parent="Node3D" groups=["hero"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.02218, 0)
script = ExtResource("7")
movespeed = 8.0
generator = ExtResource("8")
inventory_menu = NodePath("../../Inventory/InventoryMenu")
inventory_tooltip = NodePath("../../Inventory/Tooltip")
ground_items = NodePath("../Node3D/Items")

[node name="Shape3D" type="CollisionShape3D" parent="Node3D/Hero"]
shape = SubResource("1")

[node name="MeshInstance3D" type="MeshInstance3D" parent="Node3D/Hero"]
mesh = SubResource("7")

[node name="Area3D" type="Area3D" parent="Node3D/Hero"]
input_ray_pickable = false

[node name="Shape3D" type="CollisionShape3D" parent="Node3D/Hero/Area3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.470862, 0)
shape = SubResource("8")

[node name="StaticBody3D" type="StaticBody3D" parent="Node3D"]
transform = Transform3D(88.5146, 0, 0, 0, 1, 0, 0, 0, 88.5146, 0, 0, 0)

[node name="CollisionShape3D" type="CollisionShape3D" parent="Node3D/StaticBody3D"]
shape = SubResource("2")

[node name="MeshInstance3D" type="MeshInstance3D" parent="Node3D/StaticBody3D"]
mesh = SubResource("3")

[node name="WorldEnvironment" type="WorldEnvironment" parent="Node3D"]
environment = SubResource("5")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="Node3D"]
transform = Transform3D(1.91069e-15, -1, -4.37114e-08, -0.522647, -3.72661e-08, 0.852549, -0.852549, 2.28456e-08, -0.522647, -9.53674e-07, 10.1265, -8.46388)
directional_shadow_mode = 0

[node name="Camera3D" type="Camera3D" parent="Node3D"]
transform = Transform3D(1, 0, 0, 0, 0.584391, 0.811472, 0, -0.811472, 0.584391, -0.0395966, 14.83, 12.56)

[node name="Node3D" parent="Node3D" instance=ExtResource("3_e5ahg")]

[node name="Inventory" parent="Node3D/Node3D/Openable/Chest" index="3"]
inventory = SubResource("Resource_wn8mf")

[node name="Inventory" parent="Node3D/Node3D/Openable/Chest2" index="3"]
inventory = SubResource("Resource_cqjis")

[node name="Inventory" type="CanvasLayer" parent="."]

[node name="Generator" type="Button" parent="Inventory"]
offset_left = 286.0
offset_top = 290.0
offset_right = 342.0
offset_bottom = 310.0
focus_mode = 0

[node name="Label" type="Label" parent="Inventory/Generator"]
layout_mode = 0
offset_left = -78.0
offset_top = 25.0
offset_right = 134.0
offset_bottom = 39.0
text = "(Press Tab or I to open inventory)"

[node name="Label2" type="Label" parent="Inventory/Generator"]
layout_mode = 0
offset_left = -78.0
offset_top = 40.0
offset_right = 136.0
offset_bottom = 54.0
text = "(Hold Alt to highlight items)"

[node name="InventoryMenu" parent="Inventory" instance=ExtResource("1")]

[node name="GrabbedItem" parent="Inventory/InventoryMenu" groups=["grabbed_item"] instance=ExtResource("4")]
visible = false
offset_left = 220.787
offset_top = 69.0519
offset_right = 220.787
offset_bottom = 69.0519
scale = Vector2(1.5, 1.5)
mouse_filter = 2
script = ExtResource("2")
drop_at_node = NodePath("../../../Node3D/Hero")
drop_ground_item_manager = NodePath("../../../Node3D/Node3D/Items")
drop_max_distance = 8.0
drop_camera_3d = NodePath("../../../Node3D/Camera3D")
drop_ray_mask = 1
unit_size = Vector2(14, 14)
hide_cursor = false

[node name="InworlnventoriesTutorial" type="AcceptDialog" parent="Inventory/InventoryMenu"]
dialog_text = "This inventory has random stuff! An ItemInstantiator put them here.
These can also drop items to the ground.

The chest's contents are displayed here by just duplicating the chest's
InventoryView. Not just the Inventory resource - that way custom
inventory layouts and extra nodes (like this ? button) can be used!"

[node name="Tooltip" parent="Inventory" instance=ExtResource("3")]
visible = false
offset_left = 198.0
offset_top = -23.0
offset_right = 358.0
offset_bottom = 52.0
theme = ExtResource("17_ici5q")
compare_to_inventory = NodePath("../InventoryMenu/CenterContainer/TabContainer/Equip/Control/Equip")
color_neutral = Color(0.376471, 0.376471, 0.376471, 1)

[connection signal="body_entered" from="Node3D/Hero/Area3D" to="Node3D/Hero" method="_on_ItemPickup_body_entered"]
[connection signal="pressed" from="Inventory/Generator" to="Node3D/Hero" method="_on_Generator_pressed"]

[editable path="Node3D/Node3D"]
